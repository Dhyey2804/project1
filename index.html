<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rock ¬∑ Paper ¬∑ Scissors</title>
  <style>
    :root {
      --bg: #0b1020;
      --panel: #121a33;
      --text: #e7ebff;
      --muted: #a9b3d9;
      --accent: #7aa2ff;
      --win: #18c29c;
      --lose: #ff6b6b;
      --draw: #ffd166;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    [data-theme="light"]{
      --bg:#f7f9ff; --panel:#ffffff; --text:#0b1020; --muted:#5b678a; --accent:#3757ff; --win:#10b981; --lose:#ef4444; --draw:#b45309;
    }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Noto Sans", "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 1200px at 80% -10%, rgba(122,162,255,.15), transparent 60%), var(--bg);
      color: var(--text);
      display: grid;
      place-items: center;
      padding: 24px;
    }
    .app {
      width: min(980px, 96vw);
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      backdrop-filter: blur(6px);
      border: 1px solid rgba(255,255,255,.06);
      border-radius: 20px;
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    header {
      display: flex; align-items: center; justify-content: space-between;
      padding: 18px 20px; background: var(--panel);
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    header h1 { font-size: clamp(18px, 2.4vw, 24px); margin: 0; letter-spacing: .4px; }
    header .right { display: flex; gap: 10px; align-items: center; }
    .switch { display: inline-flex; align-items: center; gap: 8px; font-size: 14px; color: var(--muted); }
    .switch input { width: 44px; height: 24px; appearance: none; background: #262f53; border-radius: 999px; position: relative; outline: none; cursor: pointer; transition: background .2s ease; }
    .switch input:checked { background: #2b3a77; }
    .switch input::after { content:""; position: absolute; inset: 3px; width: 18px; height: 18px; background: white; border-radius: 50%; transform: translateX(0); transition: transform .2s ease; }
    .switch input:checked::after { transform: translateX(20px); }

    main { padding: 22px; display: grid; gap: 18px; }

    .scoreboard {
      display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;
    }
    .card {
      background: var(--panel); border: 1px solid rgba(255,255,255,.06); border-radius: 16px; padding: 16px; box-shadow: var(--shadow);
    }
    .score {
      display: grid; place-items: center; gap: 6px; text-align: center;
    }
    .score .label { color: var(--muted); font-size: 14px; }
    .score .value { font-weight: 800; font-size: clamp(28px, 4.5vw, 40px); }

    .arena { display: grid; grid-template-columns: 1fr 120px 1fr; align-items: center; gap: 16px; }
    .vs { text-align: center; color: var(--muted); font-weight: 700; letter-spacing: 1px; }
    .choice {
      display: grid; place-items: center; gap: 8px; padding: 16px; border-radius: 16px; min-height: 120px;
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.01));
      border: 1px dashed rgba(255,255,255,.14);
    }
    .choice .icon { font-size: 48px; }
    .choice .name { color: var(--muted); font-size: 14px; }

    .controls { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
    button.play {
      appearance: none; border: 1px solid rgba(255,255,255,.06); background: var(--panel); color: var(--text);
      padding: 14px 12px; border-radius: 14px; cursor: pointer; font-size: 16px; font-weight: 700; box-shadow: var(--shadow);
      transition: transform .05s ease, filter .2s ease; display: grid; place-items: center;
    }
    button.play:active { transform: translateY(1px) scale(.99); }
    button.play .big { font-size: 28px; display:block; }
    button.play .small { color: var(--muted); font-size: 12px; margin-top: 4px; font-weight: 600; letter-spacing: .4px; }

    .result {
      display: grid; place-items: center; text-align: center; gap: 6px;
    }
    .result .banner {
      font-weight: 900; font-size: clamp(18px, 3.6vw, 28px);
      padding: 10px 14px; border-radius: 999px; display: inline-block;
    }
    .result[data-state="win"] .banner { background: color-mix(in oklab, var(--win), transparent 80%); color: var(--win); }
    .result[data-state="lose"] .banner { background: color-mix(in oklab, var(--lose), transparent 80%); color: var(--lose); }
    .result[data-state="draw"] .banner { background: color-mix(in oklab, var(--draw), transparent 80%); color: var(--draw); }
    .result .detail { color: var(--muted); font-size: 14px; }

    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .settings { display: flex; align-items: center; gap: 12px; justify-content: space-between; }
    .settings .group { display: flex; align-items: center; gap: 10px; color: var(--muted); }
    select, .ghost {
      border-radius: 12px; border: 1px solid rgba(255,255,255,.08); background: var(--panel); color: var(--text); padding: 10px 12px;
      font-weight: 600;
    }
    .ghost { cursor: pointer; }

    .history { max-height: 220px; overflow: auto; }
    .history ul { list-style: none; margin: 0; padding: 0; display: grid; gap: 8px; }
    .history li { display: grid; grid-template-columns: 1fr auto 1fr; gap: 8px; align-items: center; font-weight: 600; }
    .history .tag { padding: 4px 8px; border-radius: 999px; font-size: 12px; }
    .tag.win { background: color-mix(in oklab, var(--win), transparent 82%); color: var(--win); }
    .tag.lose { background: color-mix(in oklab, var(--lose), transparent 82%); color: var(--lose); }
    .tag.draw { background: color-mix(in oklab, var(--draw), transparent 82%); color: var(--draw); }

    footer { padding: 14px 20px; color: var(--muted); font-size: 13px; text-align: center; border-top: 1px solid rgba(255,255,255,.08); }

    /* Tiny bounce for chosen icons */
    .pop { animation: pop .22s ease; }
    @keyframes pop { from { transform: scale(.9); } to { transform: scale(1); } }

    /* Responsive tweaks */
    @media (max-width: 720px){
      .scoreboard { grid-template-columns: 1fr; }
      .arena { grid-template-columns: 1fr; }
      .controls { grid-template-columns: 1fr; }
      .row { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="app" id="app" data-theme="dark">
    <header>
      <h1>ü™® Rock ¬∑ üìÑ Paper ¬∑ ‚úÇÔ∏è Scissors</h1>
      <div class="right">
        <label class="switch" title="Toggle light/dark">
          <span>Light</span>
          <input id="themeToggle" type="checkbox" aria-label="Toggle light/dark theme">
        </label>
      </div>
    </header>
    <main>
      <section class="scoreboard">
        <div class="card score" aria-live="polite">
          <div class="label">Player Score</div>
          <div class="value" id="playerScore">0</div>
        </div>
        <div class="card score" aria-live="polite">
          <div class="label">Computer Score</div>
          <div class="value" id="computerScore">0</div>
        </div>
        <div class="card score">
          <div class="label">Target</div>
          <div class="value" id="targetRounds">3</div>
        </div>
      </section>

      <section class="arena">
        <div class="card choice" id="playerChoice">
          <div class="icon" id="playerIcon">‚ùî</div>
          <div class="name" id="playerName">You</div>
        </div>
        <div class="vs">VS</div>
        <div class="card choice" id="computerChoice">
          <div class="icon" id="computerIcon">‚ùî</div>
          <div class="name" id="computerName">Computer</div>
        </div>
      </section>

      <section class="controls">
        <button class="play" data-move="rock" aria-keyshortcuts="R" title="R">
          <span class="big">ü™®</span>
          <span class="small">Rock (R)</span>
        </button>
        <button class="play" data-move="paper" aria-keyshortcuts="P" title="P">
          <span class="big">üìÑ</span>
          <span class="small">Paper (P)</span>
        </button>
        <button class="play" data-move="scissors" aria-keyshortcuts="S" title="S">
          <span class="big">‚úÇÔ∏è</span>
          <span class="small">Scissors (S)</span>
        </button>
      </section>

      <section class="row">
        <div class="card result" id="result" data-state="draw" aria-live="polite">
          <div class="banner" id="banner">Make your move!</div>
          <div class="detail" id="detail">First to <strong>3</strong> wins the game.</div>
        </div>
        <div class="card settings">
          <div class="group">
            <label for="bestOf">First to</label>
            <select id="bestOf">
              <option value="1">1</option>
              <option value="3" selected>3</option>
              <option value="5">5</option>
              <option value="7">7</option>
            </select>
            <span>wins</span>
          </div>
          <div class="group">
            <button class="ghost" id="resetBtn" title="Reset game">Reset</button>
          </div>
        </div>
      </section>

      <section class="row">
        <div class="card history" aria-label="Round history">
          <ul id="history"></ul>
        </div>
        <div class="card" style="display:grid; gap:8px; align-content:start;">
          <strong>Shortcuts</strong>
          <span class="hint">R = Rock, P = Paper, S = Scissors</span>
          <span class="hint">Enter = Reset when game ends</span>
        </div>
      </section>
    </main>
    <footer>
      Built as a single-file app. No dependencies.
    </footer>
  </div>

  <script>
    (() => {
      const MOVES = ["rock", "paper", "scissors"];
      const ICONS = { rock: "ü™®", paper: "üìÑ", scissors: "‚úÇÔ∏è" };

      const els = {
        app: document.getElementById('app'),
        themeToggle: document.getElementById('themeToggle'),
        playerScore: document.getElementById('playerScore'),
        computerScore: document.getElementById('computerScore'),
        targetRounds: document.getElementById('targetRounds'),
        playerIcon: document.getElementById('playerIcon'),
        computerIcon: document.getElementById('computerIcon'),
        result: document.getElementById('result'),
        banner: document.getElementById('banner'),
        detail: document.getElementById('detail'),
        bestOf: document.getElementById('bestOf'),
        resetBtn: document.getElementById('resetBtn'),
        history: document.getElementById('history'),
      };

      const state = {
        scores: { player: 0, computer: 0 },
        target: 3,
        isOver: false,
      };

      function randChoice(){
        return MOVES[Math.floor(Math.random() * MOVES.length)];
      }

      function winner(p, c){
        if (p === c) return 'draw';
        if ((p === 'rock' && c === 'scissors') || (p === 'paper' && c === 'rock') || (p === 'scissors' && c === 'paper')) return 'player';
        return 'computer';
      }

      function setIcons(p, c){
        els.playerIcon.textContent = ICONS[p] || '‚ùî';
        els.computerIcon.textContent = ICONS[c] || '‚ùî';
        els.playerIcon.classList.remove('pop');
        els.computerIcon.classList.remove('pop');
        requestAnimationFrame(() => {
          els.playerIcon.classList.add('pop');
          els.computerIcon.classList.add('pop');
        });
      }

      function pushHistory({round, p, c, outcome}){
        const li = document.createElement('li');
        li.innerHTML = `<span>${round}. You ${ICONS[p]} </span><span class="tag ${outcome}">${outcome.toUpperCase()}</span><span style="text-align:right"> ${ICONS[c]} CPU</span>`;
        els.history.prepend(li);
      }

      function updateScores(){
        els.playerScore.textContent = state.scores.player;
        els.computerScore.textContent = state.scores.computer;
      }

      function announce(outcome, p, c){
        const map = { win: {t:'You win!', color:'win'}, lose: {t:'You lose!', color:'lose'}, draw: {t:'Draw', color:'draw'} };
        const key = outcome === 'player' ? 'win' : outcome === 'computer' ? 'lose' : 'draw';
        els.result.dataset.state = map[key].color;
        els.banner.textContent = map[key].t;
        els.detail.innerHTML = `${ICONS[p]} beats ${ICONS[c]}? ${key==='draw' ? 'Same move‚Äîno points.' : key==='win' ? 'Nice pick!' : 'Tough luck.'}`;
      }

      function checkGameOver(){
        if (state.scores.player >= state.target || state.scores.computer >= state.target){
          state.isOver = true;
          const youWon = state.scores.player > state.scores.computer;
          els.banner.textContent = youWon ? 'üèÜ You won the match!' : 'üíÄ You lost the match';
          els.result.dataset.state = youWon ? 'win' : 'lose';
          els.detail.innerHTML = `Final score: <strong>${state.scores.player}</strong> ‚Äì <strong>${state.scores.computer}</strong>. Press <kbd>Enter</kbd> to reset.`;
        }
      }

      function play(pMove){
        if (state.isOver) return;
        const cMove = randChoice();
        setIcons(pMove, cMove);
        const who = winner(pMove, cMove);
        if (who === 'player') state.scores.player++;
        else if (who === 'computer') state.scores.computer++;
        updateScores();
        const outcomeTag = (who==='player') ? 'win' : (who==='computer' ? 'lose' : 'draw');
        pushHistory({ round: state.scores.player + state.scores.computer, p: pMove, c: cMove, outcome: outcomeTag });
        announce(who, pMove, cMove);
        checkGameOver();
      }

      function reset(){
        state.scores.player = 0; state.scores.computer = 0; state.isOver = false;
        updateScores();
        els.playerIcon.textContent = '‚ùî';
        els.computerIcon.textContent = '‚ùî';
        els.banner.textContent = 'Make your move!';
        els.result.dataset.state = 'draw';
        els.detail.innerHTML = `First to <strong>${state.target}</strong> wins the game.`;
        els.history.innerHTML = '';
      }

      // Event wiring
      document.querySelectorAll('button.play').forEach(btn => {
        btn.addEventListener('click', () => play(btn.dataset.move));
      });

      // Keyboard shortcuts
      window.addEventListener('keydown', (e) => {
        const k = e.key.toLowerCase();
        if (k === 'r') play('rock');
        if (k === 'p') play('paper');
        if (k === 's') play('scissors');
        if (k === 'enter' && state.isOver) reset();
      });

      // Settings
      els.bestOf.addEventListener('change', () => {
        state.target = parseInt(els.bestOf.value, 10);
        els.targetRounds.textContent = state.target;
        reset();
      });

      els.resetBtn.addEventListener('click', reset);

      // Theme toggle (persist in localStorage)
      const savedTheme = localStorage.getItem('rps-theme') || 'dark';
      els.app.dataset.theme = savedTheme;
      els.themeToggle.checked = (savedTheme === 'light');
      els.themeToggle.addEventListener('change', () => {
        const theme = els.themeToggle.checked ? 'light' : 'dark';
        els.app.dataset.theme = theme;
        localStorage.setItem('rps-theme', theme);
      });

      // Initial render
      updateScores();
    })();
  </script>
</body>
</html>
